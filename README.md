# zio-quickstart-https

A simple HTTPS server with one endpoint.

Before running the server, first run the _makecert.sh_ script, which will put a
_server.crt_ and _server.key_ file in _src/main/resources_, generated by the
`openssl` command.

In one terminal, cd into the source directory and run:

```
sbt run
```

In another terminal, do this to have curl call the endpoint, allowing
self-signed cert:

```
curl -k https://localhost:8080/ping
```

If you omit the `-k` argument to `curl`, then you will get an error from `curl`
and the server will log an SSL handshake error.

## Native CLI

This project generates a CLI out of the API routes

To compile the CLI to a native executable binary, we use GraalVM `native-image` tool.

To compile the CLI natively, we provide a bunch of sbt aliases.

To compile the CLI natively, you'll need to:
1. Update the `native-image` configuration.     
   For this, in a first terminal, run `sbt start`   
   Once the server is started, in a second terminal, run `sbt generateCliNativeConfig`
2. Compile the CLI natively.     
   For this, in a first terminal, run `sbt start` (if not already running)    
   Once the server is started, in a second terminal, run `sbt compileCliNativeBinary`    
